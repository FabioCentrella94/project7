(function(t){function e(e){for(var n,r,i=e[0],l=e[1],d=e[2],u=0,c=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&c.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);m&&m(e);while(c.length)c.shift()();return o.push.apply(o,d||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],n=!0,i=1;i<s.length;i++){var l=s[i];0!==a[l]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},a={app:0},o=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var d=0;d<i.length;d++)e(i[d]);var m=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0178":function(t,e,s){"use strict";s("3d2e")},1559:function(t,e,s){},"199a":function(t,e,s){},"19f5":function(t,e,s){"use strict";s("ff9e")},"2b0b":function(t,e,s){"use strict";s("1559")},"358c":function(t,e,s){"use strict";s("ba38")},"3d2e":function(t,e,s){},"439c":function(t,e,s){"use strict";s("a9ac")},4773:function(t,e,s){t.exports=s.p+"img/icon-left-font-monochrome-white.4891a9da.svg"},"56d7":function(t,e,s){"use strict";s.r(e);var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Header"),"login"===t.$route.name?s("Login",{key:t.$route.fullPath,on:{logingIn:t.logedUser}}):t._e(),"register"===t.$route.name?s("Register",{key:t.$route.fullPath,on:{logingIn:t.logedUser}}):t._e(),"addpost"===t.$route.name?s("AddPost"):t._e(),"postlist"===t.$route.name?s("PostList"):t._e(),"profile"===t.$route.name?s("Profile"):t._e(),"singlepost"===t.$route.name?s("SinglePost"):t._e(),"editpost"===t.$route.name?s("EditPost"):t._e(),"login"!==t.$route.name&&"register"!==t.$route.name&&"postlist"!==t.$route.name&&"singlepost"!==t.$route.name&&"addpost"!==t.$route.name&&"editpost"!==t.$route.name&&"profile"!==t.$route.name?s("NotFound"):t._e(),"postlist"!==t.$route.name&&"singlepost"!==t.$route.name?s("Footer"):t._e()],1)},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"nav"}},[n("div",[n("router-link",{attrs:{to:"/"}},[n("img",{attrs:{src:s("4773"),alt:"Company Logo"}})])],1),n("div",{attrs:{id:"linkcontainer"}},["register"===t.$route.name||"login"===t.$route.name?n("router-link",{attrs:{to:"/"}},[t._v("Login")]):t._e(),"register"===t.$route.name||"login"===t.$route.name?n("router-link",{attrs:{to:"/register"}},[t._v("Register")]):t._e(),"register"!==t.$route.name&&"login"!==t.$route.name&&"/postlist"!==t.$route.name?n("router-link",{attrs:{to:"/postlist"}},[t._v("Home")]):t._e(),"register"!==t.$route.name&&"login"!==t.$route.name?n("router-link",{attrs:{to:{name:"profile",params:{userId:t.getUserId}}}},[t._v("Profile")]):t._e(),"register"!==t.$route.name&&"login"!==t.$route.name?n("router-link",{attrs:{to:"/addpost"}},[t._v("Upload")]):t._e(),"register"!==t.$route.name&&"login"!==t.$route.name?n("router-link",{attrs:{to:"/"}},[n("span",{on:{click:t.logout}},[t._v("Logout")])]):t._e()],1)])},i=[],l={name:"Header",computed:{getUserId(){return sessionStorage.getItem("userId")}},methods:{logout(){this.$store.commit("logout")}}},d=l,m=(s("ba78"),s("2877")),u=Object(m["a"])(d,r,i,!1,null,null,null),c=u.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",[s("h5",[t._v(t._s(t.copyright))])])},g=[],h={name:"Footer",data(){return{companyName:"Groupomania"}},computed:{copyright(){const t=(new Date).getFullYear();return`Copyright ${this.companyName} ${t}`}}},f=h,y=(s("439c"),Object(m["a"])(f,p,g,!1,null,null,null)),I=y.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",[n("img",{attrs:{src:s("b505"),alt:"",id:"loadingGif",hidden:""}}),0==t.loggingIn?n("div",{staticClass:"container"},[t._m(0),t._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{autocomplete:"on",id:"username",type:"text",placeholder:"Enter Username",name:"username",pattern:"^[a-zA-Z0-9]{1,15}$",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),n("p",{attrs:{hidden:""}},[t._v("Invalid Input")]),t._m(2),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",placeholder:"Enter Password",name:"password",pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*\\-])\\S{8,}$",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("p",{attrs:{hidden:""}},[t._v("Invalid Input")]),n("br"),n("button",{attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("Login")])]):t._e()])},b=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Login")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"username"}},[s("b",[t._v("Username")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"password"}},[s("b",[t._v("Password")])])}],k=s("bc3a"),C=s.n(k),E={name:"LoginForm",data(){return{username:"",password:"",loggingIn:!1}},methods:{login(){document.getElementById("loadingGif").removeAttribute("hidden"),this.loggingIn=!0,C.a.post("https://project7-backend.myportfolio.training/api/auth/login",{username:this.username,email:this.email,password:this.password},{headers:{"Content-Type":"application/json"}}).then(t=>{"200"===t.data.status?(this.$store.commit("login",t),this.$router.push("/postlist")):"404"===t.data.status?(document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t.data.message),location.reload()):"401"===t.data.status?(document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t.data.message),this.$store.commit("logout")):(document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t.data.message),location.reload())}).catch(t=>{document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t),location.reload()})}}},_=E,D=(s("19f5"),Object(m["a"])(_,v,b,!1,null,null,null)),S=D.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",[n("img",{attrs:{src:s("b505"),alt:"",id:"loadingGif",hidden:""}}),0==t.loggingIn?n("div",{staticClass:"container"},[t._m(0),n("div",[t._m(1),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{autocomplete:"on",id:"username",type:"text",placeholder:"Enter Username",name:"username",pattern:"^[a-zA-Z0-9]{1,}$",required:""},domProps:{value:t.username},on:{blur:t.checkUserInput,input:[function(e){e.target.composing||(t.username=e.target.value)},function(e){t.checkUserInput(e),t.enableSubmitButton()}]}}),n("p",{staticStyle:{"text-align":"center","font-size":"14px"},attrs:{hidden:""}},[t._v(" Required Field! Only Numbers And Letters! ")])]),n("div",[t._m(2),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{autocomplete:"on",id:"email",type:"text",placeholder:"Enter Email",name:"email",pattern:"^\\S[a-zA-Z0-9._%+\\-]+@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,4}$",required:""},domProps:{value:t.email},on:{blur:t.checkUserInput,input:[function(e){e.target.composing||(t.email=e.target.value)},function(e){t.checkUserInput(e),t.enableSubmitButton()}]}}),n("p",{staticStyle:{"text-align":"center","font-size":"14px"},attrs:{hidden:""}},[t._v(" Required Field! Match the E-Mail Format! ")])]),n("div",[t._m(3),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",placeholder:"Enter Password",name:"password",pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*\\-])\\S{8,}$",required:""},domProps:{value:t.password},on:{blur:t.checkUserInput,input:[function(e){e.target.composing||(t.password=e.target.value)},function(e){t.checkUserInput(e),t.enableSubmitButton()}]}}),n("p",{staticStyle:{"text-align":"center","font-size":"14px"},attrs:{hidden:""}},[t._v(" Required Field! At Least 8 digits, 1 Numbers, 1 Letter, 1 Uppercase, 1 Lowercase and 1 Symbol (#?!@$%^&*-) ")])]),n("br"),n("button",{attrs:{type:"submit",disabled:""},on:{click:function(e){return e.preventDefault(),t.register(e)}}},[t._v("Register")])]):t._e()])},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Register")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"username"}},[s("b",[t._v("Username")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"email"}},[s("b",[t._v("Email")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"password"}},[s("b",[t._v("Password")])])}],$={name:"RegistrationForm",data(){return{username:"",email:"",password:"",loggingIn:!1}},methods:{checkUserInput(t){"register"===this.$route.name&&(t.target.value.length>0&&t.target.value.match(t.target.pattern)?(t.target.style.borderColor="greenyellow",t.target.nextSibling.setAttribute("hidden",!0)):(t.target.style.borderColor="red",t.target.nextSibling.removeAttribute("hidden")))},enableSubmitButton(){let t=document.querySelectorAll("input"),e=document.getElementsByTagName("button")[0];if("register"===this.$route.name)for(let s=0;s<t.length;s++)t[0].value.length>=1&&t[0].value.match(t[0].pattern)&&t[1].value.length>=1&&t[1].value.match(t[1].pattern)&&t[2].value.length>=1&&t[2].value.match(t[2].pattern)?e.removeAttribute("disabled"):e.setAttribute("disabled",!0)},register(){this.loggingIn=!0,document.getElementById("loadingGif").removeAttribute("hidden"),C.a.post("https://project7-backend.myportfolio.training/api/auth/signup",{username:this.username,email:this.email,password:this.password},{headers:{"Content-Type":"application/json"}}).then(t=>{"201"===t.data.status?setTimeout(()=>{this.login()},1e3):"409"===t.data.status&&"Username already used!"===t.data.message?(document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t.data.message),setTimeout(()=>{let t=document.getElementsByName("username");t[0].style.borderColor="crimson"},400),location.reload()):"409"===t.data.status&&"Email already used!"===t.data.message?(document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t.data.message),setTimeout(()=>{let t=document.getElementsByName("email");t[0].style.borderColor="crimson"},1e3),location.reload()):(document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t.data.message),location.reload())}).catch(t=>{document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t),location.reload()})},login(){C.a.post("https://project7-backend.myportfolio.training/api/auth/login",{username:this.username,email:this.email,password:this.password},{headers:{"Content-Type":"application/json"}}).then(t=>{"200"===t.data.status?(this.$store.commit("login",t),this.$router.push("/postlist")):(document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t.data.message),location.reload())}).catch(t=>{document.getElementById("loadingGif").setAttribute("hidden",!0),this.loggingIn=!1,alert(t),location.reload()})}}},U=$,N=(s("ffa6"),Object(m["a"])(U,P,w,!1,null,null,null)),A=N.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",[n("img",{attrs:{src:s("b505"),alt:"",id:"loadingGif",hidden:""}}),n("div",{staticClass:"uploadContainer"},[n("h1",[t._v("Share Your Gif here")]),n("div",[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{id:"title",type:"text",name:"title"},domProps:{value:t.title},on:{input:[function(e){e.target.composing||(t.title=e.target.value)},function(e){return t.validateFileInput(e)}]}})]),n("div",{staticClass:"uploadfilecontainer"},[t._m(1),n("br"),n("input",{attrs:{id:"file",accept:"image/gif, image/jpeg, image/png",pattern:"^.*\\.(jpg|jpeg|png|gif)$",type:"file",name:"file"},on:{change:function(e){t.validateFileInput(e),t.previewFile(e)}}}),n("img",{attrs:{id:"imagepreview"}})]),n("button",{attrs:{type:"submit",disabled:""},on:{click:function(e){return e.preventDefault(),t.uploadFile(e)}}},[t._v(" Upload ")])])])},B=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"title"}},[s("b",[t._v("Title")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"file"}},[s("b",[t._v("Upload your file")])])}],x={name:"addPost",data(){return{userId:sessionStorage.getItem("userId"),title:"",file:""}},methods:{previewFile(t){if(this.file=t.target.files[0],this.file instanceof Blob){let t=new FileReader;t.onload=function(t){document.getElementById("imagepreview").src=t.target.result},t.readAsDataURL(this.file)}else document.getElementById("imagepreview").src=""},uploadFile(){document.getElementsByClassName("uploadContainer")[0].style.display="none",document.getElementById("loadingGif").removeAttribute("hidden");let t=new FormData;t.append("file",this.file),t.append("userId",this.userId),t.append("title",this.title),C.a.post("https://project7-backend.myportfolio.training/api/post",t,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"multipart/form-data"}}).then(t=>{"201"===t.data.status?this.$router.push("/postlist"):"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):(document.getElementById("loadingGif").setAttribute("hidden",!0),document.getElementsByClassName("uploadContainer")[0].style.display="initial",alert(t.data.message))}).catch(t=>{document.getElementById("loadingGif").setAttribute("hidden",!0),document.getElementsByClassName("uploadContainer")[0].style.display="initial",alert(t)})},validateFileInput(){let t=document.querySelectorAll("input"),e=document.getElementsByTagName("button")[0];for(let s=0;s<t.length;s++)t[0].value.length>=1&&t[1].value.match(t[1].pattern)?e.removeAttribute("disabled"):e.setAttribute("disabled",!0)}}},j=x,T=(s("358c"),Object(m["a"])(j,L,B,!1,null,null,null)),R=T.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"postcontainer",staticStyle:{"scrollbar-width":"none"},on:{scroll:function(e){return t.handleScroll(e)}}},[t.sortPostsDifferentUser.length<1?s("div",[s("h1",[t._v("Start sharing your gif with the community")])]):t._l(t.sortPostsDifferentUser,(function(e){return s("div",{key:e.postID,staticClass:"imagetitlecontainer"},[s("div",{staticStyle:{display:"flex","flex-flow":"row","justify-content":"space-between"}},[s("div",[s("h3",{staticStyle:{color:"crimson"}},[t._v(t._s(e.Username))]),s("h2",{staticStyle:{"margin-bottom":"4%","word-wrap":"break-word"}},[t._v(" "+t._s(e.Title)+" ")])]),s("div",{staticClass:"iconcontainer"},[s("div",{staticClass:"icons2",attrs:{id:e.PostID}},[e.UserID===t.logedInUser||t.getLocalStorage.hasOwnProperty(e.PostID)?t._e():s("span",[s("i",{staticClass:"fas fa-bell",attrs:{id:e.PostID}})])])])]),s("router-link",{attrs:{to:{name:"singlepost",params:{postId:e.PostID}}}},[s("img",{attrs:{src:e.ImageURL,alt:""}})]),s("hr")],1)}))],2)},z=[],O={name:"PostList",data(){return{posts:[],postLikes:[],postDislikes:[],scrolled:!1,componentKey:0}},computed:{sortPostsFromCurrentUser(){return[...this.posts].filter(t=>t.UserID===sessionStorage.getItem("userId")||Object.prototype.hasOwnProperty.call(this.getLocalStorage,t.PostID)).sort((t,e)=>new Date(e.DateTime)-new Date(t.DateTime))},sortPostsDifferentUser(){return[...this.posts].filter(t=>t.UserID!==sessionStorage.getItem("userId")&&!Object.prototype.hasOwnProperty.call(this.getLocalStorage,t.PostID)).sort((t,e)=>new Date(e.DateTime)-new Date(t.DateTime)).concat(this.sortPostsFromCurrentUser)},logedInUser(){return sessionStorage.getItem("userId")},getLocalStorage(){return JSON.parse(localStorage.getItem(sessionStorage.getItem("userId")))||0},sortPostLikesCurrentUser(){return[...this.postLikes].filter(t=>t.UserID===sessionStorage.getItem("userId"))},sortPostDislikesCurrentUser(){return[...this.postDislikes].filter(t=>t.UserID===sessionStorage.getItem("userId"))}},methods:{getPosts(){C.a.get("https://project7-backend.myportfolio.training/api/post",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.posts=t.data.data:"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},forceRerender(){this.componentKey+=1},handleScroll(){let t=document.querySelectorAll(".icons2");for(let e=0;e<t.length;e++)if(t[e].getBoundingClientRect().bottom<window.innerHeight-400){t[e].style.visibility="hidden";let s=localStorage.getItem(sessionStorage.getItem("userId"));s=JSON.parse(s),s={...s,[t[e].id]:t[e].id},localStorage.setItem(sessionStorage.getItem("userId"),JSON.stringify(s))}},checkPost(){if(document.querySelectorAll(".icons2").length>0){let t=document.querySelectorAll(".icons2");t[0].style.visibility="hidden";let e=localStorage.getItem(sessionStorage.getItem("userId"));e=JSON.parse(e),e={...e,[t[0].id]:t[0].id},localStorage.setItem(sessionStorage.getItem("userId"),JSON.stringify(e))}}},beforeMount(){this.getPosts()},updated(){this.checkPost()}},G=O,q=(s("5a53"),Object(m["a"])(G,F,z,!1,null,null,null)),K=q.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"profileContainer"}},[t.deleteAccount?t._e():s("div",{staticStyle:{"margin-bottom":"15%"}},[s("h2",[t._v("User ID")]),s("p",{staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(t.userDetails.UserID))])]),t.deleteAccount?t._e():s("div",{staticStyle:{"margin-bottom":"15%"}},[s("h2",[t._v("Username")]),s("p",{staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(t.userDetails.Username))])]),t.deleteAccount?t._e():s("div",{staticStyle:{"margin-bottom":"15%"}},[s("h2",[t._v("Email")]),s("p",{staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(t.userDetails.Email))])]),t.deleteAccount?s("div",[s("p",{staticStyle:{color:"black","text-align":"center"}},[t._v(" Are you sure you want to delete your profile? ")]),s("div",{staticStyle:{display:"flex","justify-content":"space-around"},attrs:{id:"containerYesNo"}},[s("button",{staticStyle:{width:"30%"},attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.deleteProfile(e)}}},[t._v(" Yes ")]),s("button",{staticStyle:{width:"30%"},on:{click:function(e){e.preventDefault(),t.deleteAccount=!t.deleteAccount}}},[t._v(" No ")])])]):s("button",{attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.deleteAccount=!t.deleteAccount}}},[t._v(" Delete Profile ")])])},J=[],Z={name:"Profile",data(){return{userDetails:[],deleteAccount:!1}},methods:{getUserDetails(){C.a.get("https://project7-backend.myportfolio.training/api/auth/profile/"+this.$route.params.userId,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.userDetails=t.data.data[0]:"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},deleteProfile(){C.a.delete("https://project7-backend.myportfolio.training/api/auth/deleteprofile/"+this.$route.params.userId,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?(alert("profile deleted"),this.$store.commit("logout")):"401"===t.data.status?(alert(t.data.message),this.$router.push("/"),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})}},beforeMount(){this.getUserDetails()}},H=Z,W=(s("8b82"),Object(m["a"])(H,M,J,!1,null,null,null)),Y=W.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"singlepostcontainer"},[s("div",{staticClass:"singlepostimagecontainer"},[s("h2",{staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(t.post.Title))]),s("img",{attrs:{src:t.post.ImageURL,alt:""}}),s("hr"),s("div",{staticClass:"singleposticoncontainer"},[s("div",{key:t.componentKey,staticClass:"singleposticons1"},[0===t.sortPostLikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length&&0===t.sortPostDislikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length?s("span",{staticStyle:{cursor:"pointer"}},[s("i",{staticClass:"far fa-thumbs-up",attrs:{id:t.post.PostID},on:{click:function(e){return t.likePost(e)}}}),t._v(t._s(t.postLikes.filter((function(e){return e.PostID===t.post.PostID})).length))]):t._e(),1===t.sortPostLikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length&&0===t.sortPostDislikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length?s("span",{staticStyle:{cursor:"pointer"}},[s("i",{staticClass:"far fa-thumbs-up",staticStyle:{color:"yellowgreen"},attrs:{id:t.post.PostID},on:{click:function(e){return t.deleteLikePost(e)}}}),t._v(t._s(t.postLikes.filter((function(e){return e.PostID===t.post.PostID})).length))]):t._e(),1===t.sortPostDislikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length&&0===t.sortPostLikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length?s("span",[s("i",{staticClass:"far fa-thumbs-up",staticStyle:{opacity:"0.5"}}),t._v(t._s(t.postLikes.filter((function(e){return e.PostID===t.post.PostID})).length))]):t._e(),0===t.sortPostDislikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length&&0===t.sortPostLikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length?s("span",{staticStyle:{cursor:"pointer"}},[s("i",{staticClass:"far fa-thumbs-down",attrs:{id:t.post.PostID},on:{click:function(e){return t.dislikePost(e)}}}),t._v(t._s(t.postDislikes.filter((function(e){return e.PostID===t.post.PostID})).length))]):t._e(),1===t.sortPostDislikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length&&0===t.sortPostLikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length?s("span",{staticStyle:{cursor:"pointer"}},[s("i",{staticClass:"far fa-thumbs-down",staticStyle:{color:"crimson"},attrs:{id:t.post.PostID},on:{click:function(e){return t.deleteDislikePost(e)}}}),t._v(t._s(t.postDislikes.filter((function(e){return e.PostID===t.post.PostID})).length))]):t._e(),1===t.sortPostLikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length&&0===t.sortPostDislikesCurrentUser.filter((function(e){return e.PostID===t.post.PostID})).length?s("span",[s("i",{staticClass:"far fa-thumbs-down",staticStyle:{opacity:"0.5"}}),t._v(t._s(t.postDislikes.filter((function(e){return e.PostID===t.post.PostID})).length))]):t._e()]),t.post.UserID===t.logedInUser?s("div",{staticClass:"singleposticons2"},[s("router-link",{staticStyle:{color:"white",cursor:"pointer","text-decoration":"none","background-color":"crimson","border-radius":"10px",padding:"3% 5%"},attrs:{to:{name:"editpost",params:{postId:t.post.PostID}}}},[t._v(" Edit ")]),t.post.UserID===t.logedInUser?s("span",{staticStyle:{cursor:"pointer","padding-top":"2%"}},[s("i",{staticClass:"fas fa-trash-alt",on:{click:t.deletePost}})]):t._e()],1):t._e()]),s("hr")]),t._l(t.comments,(function(e){return s("div",{key:e.CommentID},[s("Comments",{attrs:{node:e},on:{getLastComment:t.getLastComment,getReply:t.getReply}})],1)})),s("form",{staticStyle:{padding:"3% 1% 7% 1%"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{placeholder:"Write a comment...",type:"text",name:"comment"},domProps:{value:t.comment},on:{input:[function(e){e.target.composing||(t.comment=e.target.value)},function(e){return t.validateComment(e)}]}}),s("button",{staticStyle:{"font-size":"20px",display:"none"},attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.postComment(e)}}},[t._v(" send ")])])],2)},Q=[],X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticStyle:{"scroll-behavior":"smooth",width:"80%"},style:{"padding-left":3*t.depth+"%"}},[s("h4",{staticStyle:{color:"red","word-wrap":"break-word"}},[t._v(" "+t._s(t.node.Username)+" ")]),s("div",{key:t.componentKeyEdit,staticStyle:{"flex-flow":"row","justify-content":"space-around","align-items":"center"}},[s("p",{staticStyle:{"word-wrap":"break-word",color:"black"}},[t._v(t._s(t.node.Comment))])]),s("div",{staticClass:"commentIconContainer"},[s("div",{key:t.componentKey,staticStyle:{"min-width":"50%",display:"flex","justify-content":"space-between"}},[0===t.sortCommentsLikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length&&0===t.sortCommentsDislikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length?s("span",{staticStyle:{cursor:"pointer"}},[s("i",{staticClass:"far fa-thumbs-up",attrs:{id:t.node.CommentID},on:{click:function(e){return t.likeComment(e)}}}),t._v(t._s(t.commentsLikes.filter((function(e){return e.CommentID===t.node.CommentID})).length))]):t._e(),1===t.sortCommentsLikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length&&0===t.sortCommentsDislikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length?s("span",{staticStyle:{cursor:"pointer"}},[s("i",{staticClass:"far fa-thumbs-up",staticStyle:{color:"yellowgreen"},attrs:{id:t.node.CommentID},on:{click:function(e){return t.deleteLikeComment(e)}}}),t._v(t._s(t.commentsLikes.filter((function(e){return e.CommentID===t.node.CommentID})).length))]):t._e(),1===t.sortCommentsDislikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length&&0===t.sortCommentsLikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length?s("span",[s("i",{staticClass:"far fa-thumbs-up",staticStyle:{opacity:"0.5"}}),t._v(t._s(t.commentsLikes.filter((function(e){return e.CommentID===t.node.CommentID})).length))]):t._e(),0===t.sortCommentsDislikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length&&0===t.sortCommentsLikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length?s("span",{staticStyle:{cursor:"pointer"}},[s("i",{staticClass:"far fa-thumbs-down",attrs:{id:t.node.CommentID},on:{click:function(e){return t.dislikeComment(e)}}}),t._v(t._s(t.commentsDislikes.filter((function(e){return e.CommentID===t.node.CommentID})).length))]):t._e(),1===t.sortCommentsDislikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length&&0===t.sortCommentsLikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length?s("span",{staticStyle:{cursor:"pointer"}},[s("i",{staticClass:"far fa-thumbs-down",staticStyle:{color:"crimson"},attrs:{id:t.node.CommentID},on:{click:function(e){return t.deleteDislikeComment(e)}}}),t._v(t._s(t.commentsDislikes.filter((function(e){return e.CommentID===t.node.CommentID})).length))]):t._e(),1===t.sortCommentsLikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length&&0===t.sortCommentsDislikesCurrentUser.filter((function(e){return e.CommentID===t.node.CommentID})).length?s("span",[s("i",{staticClass:"far fa-thumbs-down",staticStyle:{opacity:"0.5"}}),t._v(t._s(t.commentsDislikes.filter((function(e){return e.CommentID===t.node.CommentID})).length))]):t._e(),s("span",{staticStyle:{cursor:"pointer"},attrs:{id:t.node.CommentID},on:{click:function(e){return t.replyTo(e)}}},[t._v("Reply")])]),t.node.UserID===t.logedInUser?s("div",{staticClass:"singleposticons2",staticStyle:{"min-width":"35%"}},[s("span",{key:t.componentKeyEdit,staticStyle:{color:"white",cursor:"pointer","text-decoration":"none","background-color":"crimson","border-radius":"10px",padding:"3% 5%"},attrs:{id:t.node.CommentID},on:{click:function(e){return t.editComment(e)}}},[t._v(" Edit ")]),s("span",{staticStyle:{cursor:"pointer",padding:"2% 0 0 0"}},[s("i",{staticClass:"fas fa-trash-alt",attrs:{id:t.node.CommentID},on:{click:function(e){return t.deleteComment(e)}}})])]):t._e()]),s("br"),s("form",{staticClass:"formReply",staticStyle:{display:"none",padding:"0 2% 0 2%"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.reply,expression:"reply"}],staticStyle:{"margin-right":"3%"},attrs:{placeholder:"Write a comment...",type:"text",name:t.node.CommentID},domProps:{value:t.reply},on:{input:[function(e){e.target.composing||(t.reply=e.target.value)},function(e){return t.validateComment(e)}]}}),s("button",{staticStyle:{display:"none",width:"20%"},on:{click:function(e){e.preventDefault(),t.sendReply(e),t.getReply(e)}}},[t._v(" send ")])]),t.expanded||1!==t.hasReply?t._e():s("br",{staticStyle:{display:"none"}}),1===t.hasReply||t.node.children?s("span",{staticClass:"type",staticStyle:{cursor:"pointer"},attrs:{id:t.node.CommentID},on:{click:function(e){t.setParentId(e),t.getReply()}}},[t._v(t._s(t.expanded?"":"View Replies"))]):t._e()]),t.expanded?s("div",t._l(t.node.children,(function(e){return s("Comments",t._g({key:e.CommentID,attrs:{node:e,depth:t.depth+1}},t.$listeners))})),1):t._e()])},tt=[],et={name:"Comments",data(){return{commentsLikes:[],commentsDislikes:[],componentKey:0,componentKeyEdit:0,reply:"",parentId:null,expanded:!1,commentId:null,previousEditedComment:""}},computed:{logedInUser(){return sessionStorage.getItem("userId")},sortCommentsLikesCurrentUser(){return[...this.commentsLikes].filter(t=>t.UserID===sessionStorage.getItem("userId"))},sortCommentsDislikesCurrentUser(){return[...this.commentsDislikes].filter(t=>t.UserID===sessionStorage.getItem("userId"))},hasReply(){return this.node.hasReply}},props:{node:Object,depth:{type:Number,default:1}},methods:{getCommentsLikes(){C.a.get("https://project7-backend.myportfolio.training/api/post/commentslikes",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.commentsLikes=t.data.data:"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},getCommentsDislikes(){C.a.get("https://project7-backend.myportfolio.training/api/post/commentsdislikes",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.commentsDislikes=t.data.data:"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},likeComment(t){C.a.post("https://project7-backend.myportfolio.training/api/post/likecomment",{commentId:t.target.id,userId:sessionStorage.getItem("userId")},{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{"200"===t.data.status?this.getCommentsLikes():"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},dislikeComment(t){C.a.post("https://project7-backend.myportfolio.training/api/post/dislikecomment",{commentId:t.target.id,userId:sessionStorage.getItem("userId")},{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{"200"===t.data.status?this.getCommentsDislikes():"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},deleteLikeComment(t){C.a.delete("https://project7-backend.myportfolio.training/api/post/deletelikecomment/"+t.target.id+"/"+sessionStorage.getItem("userId"),{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.getCommentsLikes():"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},deleteDislikeComment(t){C.a.delete("https://project7-backend.myportfolio.training/api/post/deletedislikecomment/"+t.target.id+"/"+sessionStorage.getItem("userId"),{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.getCommentsDislikes():"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},replyTo(t){this.parentId=t.target.id,this.reply="";let e=document.getElementsByName(t.target.id);e[0].parentElement.style.display="flex","BR"==e[0].parentElement.nextSibling.tagName&&(e[0].parentElement.nextSibling.style.display="inline"),e[0].focus()},sendReply(){C.a.post("https://project7-backend.myportfolio.training/api/post/comment/"+this.$route.params.postId,{userId:sessionStorage.getItem("userId"),comment:this.reply,parentId:this.parentId,replyTo:""},{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{if("201"===t.data.status){let t=document.getElementsByClassName("formReply");for(let e=0;e<t.length;e++)t[e].style.display="none";this.reply="",this.parentId=null}else"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):(alert(t.data.message),this.reply="",this.parentId=null)}).catch(t=>{alert(t),this.reply="",this.parentId=null})},deleteComment(t){C.a.delete("https://project7-backend.myportfolio.training/api/post/deletecomment/"+t.target.id,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(e=>{"200"===e.data.status?(this.expanded=!1,t.target.parentElement.parentElement.parentElement.parentElement.style.display="none"):"401"===e.data.status?(alert(e.data.message),this.$store.commit("logout")):alert(e.data.message)}).catch(t=>{alert(t)})},editComment(t){t.target.style.display="none",this.commentId=t.target.id,this.previousEditedComment=t.target.parentElement.parentElement.parentElement.childNodes[1].childNodes[0].textContent;let e=t.target.parentElement.parentElement.parentElement.childNodes[1].childNodes[0].textContent,s=document.createElement("textarea");s.style.border="1px solid grey",t.target.parentElement.parentElement.parentElement.childNodes[1].replaceChild(s,t.target.parentElement.parentElement.parentElement.childNodes[1].childNodes[0]),s.value=e,s.style.width="70%",s.addEventListener("input",()=>{s.value.length<1?n.style.display="none":n.style.display="inline"});let n=document.createElement("i");n.className="fas fa-check",n.style.color="greenyellow",n.style.width="10%",n.style.padding="0 0",n.style.cursor="pointer",n.addEventListener("click",t=>{C.a.put("https://project7-backend.myportfolio.training/api/post/editcomment",{commentId:this.commentId,comment:t.target.parentElement.childNodes[0].value},{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(e=>{if("200"===e.data.status){let e=t.target.parentElement.childNodes[0].value,s=document.createElement("p");s.style.color="black",s.style.fontWeight="normal",t.target.parentElement.childNodes[1].style.display="none",t.target.parentElement.childNodes[2].style.display="none",t.target.parentElement.style.display="inline",s.textContent=e,s.style.wordWrap="break-word",t.target.parentElement.parentElement.childNodes[1].replaceChild(s,t.target.parentElement.parentElement.childNodes[1].childNodes[0]),t.target.parentElement.parentElement.childNodes[2].childNodes[1].childNodes[0].style.display="inline"}else"401"===e.data.status?(alert(e.data.message),this.$store.commit("logout")):alert(e.data.message)}).catch(t=>{alert(t)})});let a=document.createElement("i");a.className="fas fa-times",a.style.color="crimson",a.addEventListener("click",()=>{let e=document.createElement("p");e.style.color="black",e.style.wordWrap="break-word",e.textContent=this.previousEditedComment,t.target.parentElement.parentElement.parentElement.childNodes[1].replaceChild(e,t.target.parentElement.parentElement.parentElement.childNodes[1].childNodes[0]),t.target.parentElement.parentElement.parentElement.childNodes[1].childNodes[1].style.display="none",t.target.parentElement.parentElement.parentElement.childNodes[1].childNodes[2].style.display="none",t.target.parentElement.parentElement.parentElement.childNodes[2].childNodes[1].childNodes[0].style.display="inline",t.target.parentElement.parentElement.parentElement.childNodes[1].style.display="inline"}),a.style.cursor="pointer",t.target.parentElement.parentElement.parentElement.childNodes[1].style.display="flex",t.target.parentElement.parentElement.parentElement.childNodes[1].style.margin="0 0 5% 0",t.target.parentElement.parentElement.parentElement.childNodes[1].insertBefore(n,t.target.parentElement.parentElement.parentElement.childNodes[1].childNodes[1]),t.target.parentElement.parentElement.parentElement.childNodes[1].insertBefore(a,t.target.parentElement.parentElement.parentElement.childNodes[1].childNodes[2])},validateComment(t){t.target.value.length<1?t.target.nextSibling.style.display="none":t.target.nextSibling.style.display="inline"},getReply(t){t&&!this.expanded?(setTimeout(()=>{this.expanded=!0},1500),setTimeout(()=>{t.target.parentElement.parentElement.parentElement.childNodes[1].lastElementChild.style.backgroundColor="#FF7F7F",t.target.parentElement.parentElement.parentElement.childNodes[1].lastElementChild.scrollIntoView()},2e3),setTimeout(()=>{t.target.parentElement.parentElement.parentElement.childNodes[1].lastElementChild.style.backgroundColor="white"},3e3),t.target.parentElement.style.display="none",setTimeout(()=>{this.$emit("getReply",this.parentId)},50)):t&&this.expanded?(setTimeout(()=>{this.$emit("getLastComment",this.parentId)},50),t.target.parentElement.style.display="none",setTimeout(()=>{this.forceRerender()},1500),setTimeout(()=>{t.target.parentElement.parentElement.parentElement.childNodes[1].lastElementChild.style.backgroundColor="#FF7F7F",t.target.parentElement.parentElement.parentElement.childNodes[1].lastElementChild.scrollIntoView()},2e3),setTimeout(()=>{t.target.parentElement.parentElement.parentElement.childNodes[1].lastElementChild.style.backgroundColor="white"},3e3),t.target.parentElement.style.display="none"):(setTimeout(()=>{this.expanded=!0},1500),setTimeout(()=>{this.$emit("getReply",this.parentId)},50))},setParentId(t){this.parentId=t.target.id},forceRerender(){this.componentKey+=1},forceRerenderEdit(){this.componentKeyEdit+=1}},beforeMount(){this.getCommentsLikes(),this.getCommentsDislikes(),document.addEventListener("keypress",t=>{13===t.keyCode&&t.preventDefault()})}},st=et,nt=(s("9e30"),Object(m["a"])(st,X,tt,!1,null,null,null)),at=nt.exports,ot={name:"SinglePost",components:{Comments:at},data(){return{post:[],postLikes:[],postDislikes:[],componentKey:0,comment:"",comments:[],parentId:0,replyParentId:""}},computed:{logedInUser(){return sessionStorage.getItem("userId")},sortPostLikesCurrentUser(){return[...this.postLikes].filter(t=>t.UserID===sessionStorage.getItem("userId"))},sortPostDislikesCurrentUser(){return[...this.postDislikes].filter(t=>t.UserID===sessionStorage.getItem("userId"))}},methods:{getSinglePost(){C.a.get("https://project7-backend.myportfolio.training/api/post/singlepost/"+this.$route.params.postId,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status&&1===t.data.data.length?this.post=t.data.data[0]:"200"===t.data.status&&t.data.data.length<1?this.$router.push("/notfound"):"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},getPostLikes(){C.a.get("https://project7-backend.myportfolio.training/api/post/postlikes",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.postLikes=t.data.data:"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},getPostDislikes(){C.a.get("https://project7-backend.myportfolio.training/api/post/postdislikes",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.postDislikes=t.data.data:"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},likePost(t){C.a.post("https://project7-backend.myportfolio.training/api/post/likepost",{postId:t.target.id,userId:sessionStorage.getItem("userId")},{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{"200"===t.data.status?this.getPostLikes():"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},dislikePost(t){C.a.post("https://project7-backend.myportfolio.training/api/post/dislikepost",{postId:t.target.id,userId:sessionStorage.getItem("userId")},{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(t=>{"200"===t.data.status?this.getPostDislikes():"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},deleteLikePost(t){C.a.delete("https://project7-backend.myportfolio.training/api/post/deletelikepost/"+t.target.id+"/"+sessionStorage.getItem("userId"),{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.getPostLikes():"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},deleteDislikePost(t){C.a.delete("https://project7-backend.myportfolio.training/api/post/deletedislikepost/"+t.target.id+"/"+sessionStorage.getItem("userId"),{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.getPostDislikes():"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},getComments(){C.a.get("https://project7-backend.myportfolio.training/api/post/comments/"+this.$route.params.postId,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.comments=t.data.data:"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},getReply(t){C.a.get("https://project7-backend.myportfolio.training/api/post/comments/"+this.$route.params.postId+"/"+t,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(e=>{if("200"===e.data.status){let s=this.findById(this.comments,JSON.parse(t));setTimeout(()=>{s.children=e.data.data},100)}else"401"===e.data.status?(alert(e.data.message),this.$store.commit("logout")):alert(e.data.message)}).catch(t=>{alert(t)})},getLastComment(t){C.a.get("https://project7-backend.myportfolio.training/api/post/getlastcomment",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(e=>{if("200"===e.data.status){let s=this.findById(this.comments,JSON.parse(t));setTimeout(()=>{s.children?s.children=[...s.children,e.data.data[0]]:s.children=e.data.data},200)}else"401"===e.data.status?(alert(e.data.message),this.$store.commit("logout")):alert(e.data.message)}).catch(t=>{alert(t)})},postComment(t){C.a.post("https://project7-backend.myportfolio.training/api/post/comment/"+this.$route.params.postId,{userId:sessionStorage.getItem("userId"),comment:this.comment,parentId:this.parentId},{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"application/json"}}).then(e=>{if("201"===e.data.status){for(let t=0;t<e.data.data[2].length;t++)this.comments.push(e.data.data[2][t]);this.comment="",this.parentId=0,t.target.style.display="none"}else"401"===e.data.status?(alert(e.data.message),this.$store.commit("logout")):(alert(e.data.message),this.comment="",this.parentId=0,this.forceRerender())}).catch(t=>{alert(t),this.comment="",this.parentId=0})},deletePost(){C.a.delete("https://project7-backend.myportfolio.training/api/post/deletepost/"+this.$route.params.postId,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status?this.$router.push("/postlist"):"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})},forceRerender(){this.componentKey+=1},findById(t,e){const s=t=>t.CommentID===e?(n=t,!0):Array.isArray(t.children)&&t.children.some(s);var n;return t.some(s),n},validateComment(t){t.target.value.length<1?t.target.nextSibling.style.display="none":t.target.nextSibling.style.display="inline"}},beforeMount(){this.getSinglePost(),this.getPostLikes(),this.getPostDislikes(),this.getComments()}},rt=ot,it=(s("0178"),Object(m["a"])(rt,V,Q,!1,null,null,null)),lt=it.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",[n("img",{attrs:{src:s("b505"),alt:"",id:"loadingGif",hidden:""}}),n("div",{staticClass:"uploadContainer"},[n("h1",[t._v("Share Your Gif here")]),n("div",[t._m(0),n("input",{attrs:{type:"text",name:"title",value:""},on:{input:function(e){return t.validateFileInput(e)}}})]),n("div",{staticClass:"uploadfilecontainer"},[t._m(1),n("br"),n("input",{attrs:{accept:"image/gif, image/jpeg, image/png",pattern:"^.*\\.(jpg|jpeg|png|gif)$",type:"file",name:"file"},on:{change:function(e){t.validateFileInput(e),t.previewFile(e)}}}),n("img",{attrs:{src:"",id:"imagepreview"}})]),n("button",{attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.editPost(e)}}},[t._v("Edit")])])])},mt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"title"}},[s("b",[t._v("Title")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"file"}},[s("b",[t._v("Upload your file")])])}],ut={name:"EditPost",data(){return{post:[],userId:sessionStorage.getItem("userId"),file:""}},methods:{previewFile(t){if(this.file=t.target.files[0],this.file instanceof Blob){let t=new FileReader;t.onload=function(t){document.getElementById("imagepreview").src=t.target.result},t.readAsDataURL(this.file)}else document.getElementById("imagepreview").src=""},editPost(){let t=document.getElementsByName("title")[0].value;document.getElementsByClassName("uploadContainer")[0].style.display="none",document.getElementById("loadingGif").removeAttribute("hidden");let e=new FormData;e.append("file",this.file),e.append("userId",this.userId),e.append("title",t),C.a.put("https://project7-backend.myportfolio.training/api/post/editpost/"+this.$route.params.postId,e,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-Type":"multipart/form-data"}}).then(t=>{"200"===t.data.status?this.$router.push("/postlist"):"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):(document.getElementById("loadingGif").setAttribute("hidden",!0),document.getElementsByClassName("uploadContainer")[0].style.display="initial",alert(t.data.message))}).catch(t=>{document.getElementById("loadingGif").setAttribute("hidden",!0),document.getElementsByClassName("uploadContainer")[0].style.display="initial",alert(t)})},validateFileInput(){let t=document.querySelectorAll("input"),e=document.getElementsByTagName("button")[0];for(let s=0;s<t.length;s++)t[0].value.length<1&&!t[1].value.match(t[1].pattern)?e.setAttribute("disabled",!0):e.removeAttribute("disabled")},getSinglePost(){C.a.get("https://project7-backend.myportfolio.training/api/post/singlepost/"+this.$route.params.postId,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{"200"===t.data.status&&1===t.data.data.length?(document.getElementsByTagName("input")[0].value=t.data.data[0].Title,document.getElementById("imagepreview").src=t.data.data[0].ImageURL):"200"===t.data.status&&t.data.data.length<1?this.$router.push("/notfound"):"401"===t.data.status?(alert(t.data.message),this.$store.commit("logout")):alert(t.data.message)}).catch(t=>{alert(t)})}},beforeMount(){this.getSinglePost()}},ct=ut,pt=Object(m["a"])(ct,dt,mt,!1,null,null,null),gt=pt.exports,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[t._v("Page Not Found")])},ft=[],yt={name:"NotFound"},It=yt,vt=(s("2b0b"),Object(m["a"])(It,ht,ft,!1,null,null,null)),bt=vt.exports,kt={name:"App",data(){return{loggedIn:!1,userId:""}},components:{Header:c,Footer:I,Login:S,Register:A,AddPost:R,PostList:K,Profile:Y,SinglePost:lt,EditPost:gt,NotFound:bt},methods:{logedUser(t){this.userId=t,this.loggedIn=!0}}},Ct=kt,Et=(s("8c85"),Object(m["a"])(Ct,a,o,!1,null,null,null)),_t=Et.exports,Dt=s("8c4f");n["a"].use(Dt["a"]);const St=[{path:"/",name:"login",component:S},{path:"/register",name:"register",component:A},{path:"/addpost",name:"addpost",component:R,beforeEnter(t,e,s){null!==sessionStorage.getItem("isLogedIn")?s():s("/")}},{path:"/postlist",name:"postlist",component:K,beforeEnter(t,e,s){null!==sessionStorage.getItem("isLogedIn")?s():s("/")}},{path:"/profile/:userId",name:"profile",component:Y,beforeEnter(t,e,s){null!==sessionStorage.getItem("isLogedIn")?s():s("/")}},{path:"/singlepost/:postId",name:"singlepost",component:lt,beforeEnter(t,e,s){null!==sessionStorage.getItem("isLogedIn")?s():s("/")}},{path:"/editpost/:postId",name:"editpost",component:gt,beforeEnter(t,e,s){null!==sessionStorage.getItem("isLogedIn")?s():s("/")}},{path:"*",name:"notfound",component:bt}],Pt=new Dt["a"]({mode:"history",base:"/",routes:St});var wt=Pt,$t=s("2f62");n["a"].use($t["a"]);var Ut=new $t["a"].Store({state:{},mutations:{login(t,e){sessionStorage.setItem("token",e.data.data.token),sessionStorage.setItem("userId",e.data.data.userId),sessionStorage.setItem("isLogedIn",!0)},logout(){sessionStorage.clear(),location.reload()}},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:wt,store:Ut,render:t=>t(_t)}).$mount("#app")},"5a53":function(t,e,s){"use strict";s("92eb")},"6ed9":function(t,e,s){},"8b82":function(t,e,s){"use strict";s("d5e1")},"8c85":function(t,e,s){"use strict";s("f1c0")},"92eb":function(t,e,s){},"9e30":function(t,e,s){"use strict";s("6ed9")},a9ac:function(t,e,s){},b505:function(t,e,s){t.exports=s.p+"img/7plQ.8a7630ca.gif"},ba38:function(t,e,s){},ba78:function(t,e,s){"use strict";s("c2a6")},c2a6:function(t,e,s){},d5e1:function(t,e,s){},f1c0:function(t,e,s){},ff9e:function(t,e,s){},ffa6:function(t,e,s){"use strict";s("199a")}});
//# sourceMappingURL=app.ef66595e.js.map